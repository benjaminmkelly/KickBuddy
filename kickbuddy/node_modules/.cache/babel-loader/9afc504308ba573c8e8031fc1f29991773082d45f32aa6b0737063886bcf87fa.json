{"ast":null,"code":"import _slicedToArray from\"/Users/benkelly/Documents/Uni Work/Swapping Computers/KickBuddy/kickbuddy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Buffer}from'buffer';import'../../css/LoginPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(_ref){var authenticated=_ref.authenticated,setAuthenticated=_ref.setAuthenticated,handleAuthenticated=_ref.handleAuthenticated;/** Username and password variables for logging in */var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];/** Login detail variables for signing up to create an account */var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),signUpName=_useState6[0],setSignUpName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),signUpUsername=_useState8[0],setSignUpUsername=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),signUpPassword=_useState10[0],setSignUpPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),signUpPassword2=_useState12[0],setSignUpPassword2=_useState12[1];useEffect(function(){if(localStorage.getItem('token')){handleAuthenticated(true);}});/** Arrow functions to handle authentication */var handleUsername=function handleUsername(event){setUsername(event.target.value);};var handlePassword=function handlePassword(event){setPassword(event.target.value);};var handleSignUpName=function handleSignUpName(event){setSignUpName(event.target.value);};var handleSignUpUsername=function handleSignUpUsername(event){setSignUpUsername(event.target.value);};var handleSignUpPassword=function handleSignUpPassword(event){setSignUpPassword(event.target.value);};var handleSignUpPassword2=function handleSignUpPassword2(event){setSignUpPassword2(event.target.value);};var handleLogin=function handleLogin(){var encodedString=Buffer.from(username+\":\"+password).toString('base64');if(!username||!password){alert(\"You must enter a username and password.\");}else{fetch(\"http://unn-w19014367.newnumyspace.co.uk/kickbuddy/api/login\",{method:'POST',headers:new Headers({\"Authorization\":\"Basic \"+encodedString})}).then(function(response){return response.json();}).then(function(json){if(json.message.toLowerCase()===\"success\"){if(json.data.hasOwnProperty('token')){localStorage.setItem('token',json.data.token);localStorage.setItem('username',username);handleAuthenticated(true);}}else{console.log(\"Error: \"+json.message);alert(json.message);}}).catch(function(e){console.log(e.message);});}};var handleSignUp=function handleSignUp(){setSignUpName(signUpName);setSignUpUsername(signUpUsername);setSignUpPassword(signUpPassword);setSignUpPassword2(signUpPassword2);var formData=new FormData();formData.set(signUpName,signUpName);formData.set(signUpUsername,signUpUsername);formData.set(signUpPassword,signUpPassword);formData.set(signUpPassword2,signUpPassword2);};/** Variables to store new user details to add to database */return/*#__PURE__*/_jsx(\"div\",{children:!authenticated&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-container-login\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Sign in with your username and password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login-username-field\",type:\"text\",placeholder:\"Username\",value:username,onChange:handleUsername}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"login-password-field\",type:\"password\",placeholder:\"Password\",value:password,onChange:handlePassword}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"login-signin-button\",type:\"button\",value:\"Sign In\",onClick:handleLogin})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-container-signup\",id:true,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Don't have an account? Sign up here:\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignUp,children:[/*#__PURE__*/_jsx(\"input\",{className:\"signup-name-field\",type:\"text\",placeholder:\"Enter your name\",value:signUpName,onChange:handleSignUpName}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"signup-username-field\",type:\"text\",placeholder:\"Enter your username\",value:signUpUsername,onChange:handleSignUpUsername}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"signup-password-field\",type:\"password\",placeholder:\"Enter your password\",onChange:handleSignUpPassword}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"signup-password-field2\",type:\"password\",placeholder:\"Re-enter your password\",onChange:handleSignUpPassword2}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"signup-signup-button\",type:\"button\",value:\"Sign Up\",onClick:handleSignUp// need to write handleSignUp function to add user details to database\n// also need validation for that info\n})]})]})]})]})});}export default LoginPage;","map":{"version":3,"names":["useState","useEffect","Buffer","LoginPage","authenticated","setAuthenticated","handleAuthenticated","username","setUsername","password","setPassword","signUpName","setSignUpName","signUpUsername","setSignUpUsername","signUpPassword","setSignUpPassword","signUpPassword2","setSignUpPassword2","localStorage","getItem","handleUsername","event","target","value","handlePassword","handleSignUpName","handleSignUpUsername","handleSignUpPassword","handleSignUpPassword2","handleLogin","encodedString","from","toString","alert","fetch","method","headers","Headers","then","response","json","message","toLowerCase","data","hasOwnProperty","setItem","token","console","log","catch","e","handleSignUp","formData","FormData","set"],"sources":["/Users/benkelly/Documents/Uni Work/Swapping Computers/KickBuddy/kickbuddy/src/components/pages/LoginPage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Buffer } from 'buffer';\r\nimport '../../css/LoginPage.css';\r\n\r\nfunction LoginPage({ authenticated, setAuthenticated, handleAuthenticated }) {\r\n\r\n    /** Username and password variables for logging in */\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    /** Login detail variables for signing up to create an account */\r\n    const [signUpName, setSignUpName] = useState(\"\");\r\n    const [signUpUsername, setSignUpUsername] = useState(\"\");\r\n    const [signUpPassword, setSignUpPassword] = useState(\"\");\r\n    const [signUpPassword2, setSignUpPassword2] = useState(\"\");\r\n\r\n\r\n    useEffect(\r\n        () => {\r\n            if (localStorage.getItem('token')) {\r\n                handleAuthenticated(true);\r\n            }\r\n        });\r\n\r\n    /** Arrow functions to handle authentication */\r\n    const handleUsername = (event) => {\r\n        setUsername(event.target.value);\r\n    }\r\n    const handlePassword = (event) => {\r\n        setPassword(event.target.value);\r\n    }\r\n\r\n    const handleSignUpName = (event) => {\r\n        setSignUpName(event.target.value);\r\n    }\r\n    const handleSignUpUsername = (event) => {\r\n        setSignUpUsername(event.target.value);\r\n    }\r\n    const handleSignUpPassword = (event) => {\r\n        setSignUpPassword(event.target.value);\r\n    }\r\n    const handleSignUpPassword2 = (event) => {\r\n        setSignUpPassword2(event.target.value);\r\n    }\r\n\r\n\r\n    const handleLogin = () => {\r\n\r\n        const encodedString = Buffer.from(username + \":\" + password).toString('base64');\r\n\r\n        if(!username || !password) {\r\n            alert(\"You must enter a username and password.\");\r\n        } else {\r\n            fetch(\"http://unn-w19014367.newnumyspace.co.uk/kickbuddy/api/login\",\r\n            {\r\n                method: 'POST',\r\n                headers: new Headers({ \"Authorization\": \"Basic \" + encodedString })\r\n            })\r\n            .then(\r\n                (response) => {\r\n                    return response.json();\r\n                }\r\n            )\r\n            .then(\r\n                (json) => {\r\n                    if (json.message.toLowerCase() === \"success\") {\r\n                        if (json.data.hasOwnProperty('token')) {\r\n                            localStorage.setItem('token', json.data.token);\r\n                            localStorage.setItem('username', username);\r\n                            handleAuthenticated(true);\r\n                        }\r\n                    } else {\r\n                        console.log(\"Error: \" + json.message)\r\n                        alert(json.message);\r\n                    }\r\n                }\r\n            )\r\n            .catch(\r\n                (e) => {\r\n                    console.log(e.message)\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n        \r\n\r\n    const handleSignUp = () => {\r\n        setSignUpName(signUpName);\r\n        setSignUpUsername(signUpUsername);\r\n        setSignUpPassword(signUpPassword);\r\n        setSignUpPassword2(signUpPassword2);\r\n\r\n        let formData = new FormData();\r\n        formData.set(signUpName, signUpName);\r\n        formData.set(signUpUsername, signUpUsername);\r\n        formData.set(signUpPassword, signUpPassword);\r\n        formData.set(signUpPassword2, signUpPassword2);\r\n\r\n    }\r\n\r\n\r\n\r\n    /** Variables to store new user details to add to database */\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            {!authenticated && <div>\r\n                <h2>Sign In</h2>\r\n                <div className=\"login-container\">\r\n                    <div className=\"login-container-login\">\r\n                        <p>Sign in with your username and password</p>\r\n                        <input\r\n                            className=\"login-username-field\"\r\n                            type=\"text\"\r\n                            placeholder=\"Username\"\r\n                            value={username}\r\n                            onChange={handleUsername}\r\n                        />\r\n                        <br />\r\n                        <input\r\n                            className=\"login-password-field\"\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={password}\r\n                            onChange={handlePassword}\r\n                        />\r\n                        <br />\r\n                        <input\r\n                            className=\"login-signin-button\"\r\n                            type=\"button\"\r\n                            value=\"Sign In\"\r\n                            onClick={handleLogin}\r\n                        />\r\n                    </div>\r\n                    <br />\r\n                    <div className=\"login-container-signup\" id>\r\n                        <p>Don't have an account? Sign up here:</p>\r\n                        <form onSubmit={handleSignUp}>\r\n                            <input\r\n                                className=\"signup-name-field\"\r\n                                type=\"text\"\r\n                                placeholder=\"Enter your name\"\r\n                                value={signUpName}\r\n                                onChange={handleSignUpName}\r\n                            />\r\n                            <br />\r\n                            <input\r\n                                className=\"signup-username-field\"\r\n                                type=\"text\"\r\n                                placeholder=\"Enter your username\"\r\n                                value={signUpUsername}\r\n                                onChange={handleSignUpUsername}\r\n                            />\r\n                            <br />\r\n                            <input\r\n                                className=\"signup-password-field\"\r\n                                type=\"password\"\r\n                                placeholder=\"Enter your password\"\r\n                                onChange={handleSignUpPassword}\r\n                            />\r\n                            <br />\r\n                            <input\r\n                                className=\"signup-password-field2\"\r\n                                type=\"password\"\r\n                                placeholder=\"Re-enter your password\"\r\n                                onChange={handleSignUpPassword2}\r\n                            />\r\n                            <br />\r\n                            <input\r\n                                className=\"signup-signup-button\"\r\n                                type=\"button\"\r\n                                value=\"Sign Up\"\r\n                                onClick={handleSignUp}\r\n                            // need to write handleSignUp function to add user details to database\r\n                            // also need validation for that info\r\n                            />\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}